<nz-layout class="layout">
  <nz-header class="app-header">
    <div class="header-content">
      <div class="logo">
        <span nz-icon nzType="file-text" nzTheme="outline"></span>
        <span class="logo-text">CV Editor</span>
      </div>
      <button nz-button nzType="text" class="menu-toggle" (click)="menuVisible = !menuVisible">
        <span nz-icon [nzType]="menuVisible ? 'close' : 'menu'"></span>
      </button>
    </div>
    <div class="mobile-menu" [class.visible]="menuVisible">
      <button nz-button nzBlock (click)="menuVisible = false">
        <span nz-icon nzType="file-text"></span> Nuovo CV
      </button>
      <button nz-button nzBlock (click)="menuVisible = false">
        <span nz-icon nzType="folder-open"></span> Carica CV
      </button>
      <button nz-button nzBlock (click)="menuVisible = false">
        <span nz-icon nzType="download"></span> Esporta
      </button>
    </div>
  </nz-header>
  
  <nz-content class="cv-editor-container">
    <nz-card nzTitle="Benvenuto nel tuo CV Editor" class="welcome-card" *ngIf="!showWizard && !showTemplateSelector && !selectedTemplate">
      <p>Inizia a creare il tuo curriculum vitae personalizzato!</p>
      <button nz-button nzType="primary" nzSize="large" (click)="createNewCV()">
        <span nz-icon nzType="plus"></span>
        Crea Nuovo CV
      </button>
    </nz-card>
    
    <app-cv-wizard
      *ngIf="showWizard"
      (preferencesSelected)="onPreferencesSelected($event)">
    </app-cv-wizard>
    
    <app-template-selector 
      *ngIf="showTemplateSelector" 
      [preferences]="userPreferences"
      (templateSelected)="onTemplateSelected($event)"
      (backToWizard)="backToWizard()">
    </app-template-selector>
    
    <div *ngIf="selectedTemplate && cvData && !showEditor" class="cv-preview">
      <div class="cv-actions">
        <button nz-button (click)="backToTemplates()">
          <span nz-icon nzType="arrow-left"></span>
          Cambia Template
        </button>
        <button nz-button nzType="primary" (click)="editCV()">
          <span nz-icon nzType="edit"></span>
          Modifica CV
        </button>
        <button nz-button nzType="default" (click)="downloadPDF()">
          <span nz-icon nzType="download"></span>
          Scarica PDF
        </button>
      </div>
      
      <div id="cv-template">
        <app-modern-template *ngIf="selectedTemplate?.id === 'modern-1'" [cvData]="cvData"></app-modern-template>
        <app-classic-template *ngIf="selectedTemplate?.id === 'classic-1'" [cvData]="cvData"></app-classic-template>
        <app-creative-template *ngIf="selectedTemplate?.id === 'creative-1'" [cvData]="cvData"></app-creative-template>
        <app-minimal-template *ngIf="selectedTemplate?.id === 'minimal-1'" [cvData]="cvData"></app-minimal-template>
        <app-professional-template *ngIf="selectedTemplate?.id === 'professional-1'" [cvData]="cvData"></app-professional-template>
        <app-tech-template *ngIf="selectedTemplate?.id === 'tech-1'" [cvData]="cvData"></app-tech-template>
        <app-executive-template *ngIf="selectedTemplate?.id === 'executive-1'" [cvData]="cvData"></app-executive-template>
        <app-simple-template *ngIf="selectedTemplate?.id === 'simple-1'" [cvData]="cvData"></app-simple-template>
      </div>
    </div>
    
    <app-cv-editor 
      *ngIf="showEditor && cvData && selectedTemplate" 
      [cvData]="cvData" 
      [hasPhoto]="selectedTemplate.hasPhoto"
      (dataChanged)="onDataChanged($event)"
      (backToPreview)="backToPreview()">
    </app-cv-editor>
  </nz-content>
  
  <nz-footer class="app-footer">
    <span>CV Editor Â©2024</span>
  </nz-footer>
</nz-layout>
